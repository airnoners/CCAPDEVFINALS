<div class="back-navigation">
  <a href="/browse">‚Üê Back to Browse</a>
</div>

<section class="product-details">
  <div class="breadcrumb">
    <a href="/">Home</a> > 
    <a href="/browse">Browse</a> > 
    <span class="current-page">Product Details</span>
  </div>

  <div class="product-container">
    <!-- Product Image -->
    <div class="product-images">
      <div class="main-image">
        <img src="{{listing.image}}" alt="{{listing.title}}">
      </div>
    </div>

    <!-- Product Info -->
    <div class="product-info">
      <div class="product-header">
        <h1>{{listing.title}}</h1>
        <div class="price">‚Ç±{{listing.price}}</div>
        <p><strong>Condition:</strong> {{listing.condition}}</p>
        <div class="category-tag">{{listing.category}}</div>
      </div>

      <div class="product-status">
        <span class="status-badge available">Available</span>
        <span class="post-date">Posted on {{formatDate listing.date "MMM DD, YYYY"}}</span>
      </div>

      <div class="product-description">
        <h2>Description</h2>
        <p>{{listing.description}}</p>
      </div>

      <!-- Seller Info -->
      <div class="seller-info">
        <h2>Seller Information</h2>
        <div class="seller-profile">
          <img src="{{#if listing.seller.profileImage}}{{listing.seller.profileImage}}{{else}}/images/default.png{{/if}}" alt="Seller Profile" class="seller-image">
          <div class="seller-details">
            <h3>{{listing.seller.fullName}}</h3>
            <p class="seller-id">ID: {{listing.seller.studentId}}</p>
            <p class="member-since">Member since {{formatDate listing.seller.createdAt "MMMM YYYY"}}</p>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="btn-primary"><span class="icon">‚úâ</span> Message Seller</button>
        <button class="btn-secondary"><span class="icon">‚ô°</span> Save Item</button>
        <button class="btn-secondary" id="shareItemBtn">
          <span class="icon">‚Üó</span> Share
        </button>
      </div>

      <div id="sharePopup" class="popup success" style="display: none;">
        üîó Link copied to clipboard!
      </div>

      <!-- Safety Notice -->
      <div class="safety-notice">
        <h3>Safety Guidelines</h3>
        <ul>
          <li>‚úì Meet in designated campus trading areas</li>
          <li>‚úì Verify items before payment</li>
          <li>‚úì Use DLSU email for communication</li>
          <li>‚úì Report suspicious behavior</li>
        </ul>
      </div>
    </div>
  </div>
</section>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const shareBtn = document.getElementById("shareItemBtn");

    if (shareBtn) {
      shareBtn.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(window.location.href);
          
          const popup = document.getElementById("sharePopup");
          popup.style.display = "block";

          
          setTimeout(() => {
            popup.style.display = "none";
          }, 3000);
        } catch (err) {
          alert("‚ùå Failed to copy link.");
          console.error(err);
        }
      });
    }
  });
</script>